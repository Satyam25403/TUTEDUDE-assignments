
Part 1: Deploy Flask and Express on a Single EC2 Instance

Python and flask setup:
    sudo apt update
    sudo apt install -y python3 python3-pip python3-venv
    sudo pip3 install Flask flask-cors --break-system-packages --no-deps --ignore-installed

ubuntu@ip-172-31-33-208:~$ python3 -m pip show Flask
python3 -m pip show flask-cors
Name: Flask
Version: 3.1.2
Summary: A simple framework for building complex web applications.
Home-page: 
Author: 
Author-email: 
License: 
Location: /usr/local/lib/python3.12/dist-packages
Requires: blinker, click, itsdangerous, jinja2, markupsafe, werkzeug
Required-by: flask-cors
Name: flask-cors
Version: 6.0.1
Summary: A Flask extension simplifying CORS support
Home-page: 
Author: 
Author-email: Cory Dolphin <corydolphin@gmail.com>
License: 
Location: /usr/local/lib/python3.12/dist-packages
Requires: flask, Werkzeug
Required-by: 
ubuntu@ip-172-31-33-208:~$ 


Node.js setup:
    sudo apt update
    sudo apt install -y nodejs npm




Git setup :
    sudo apt update
    sudo apt install -y git



ubuntu@ip-172-31-33-208:~$ python3 --version
pip3 --version
node -v
npm -v
git --version
Python 3.12.3
pip 24.0 from /usr/lib/python3/dist-packages/pip (python 3.12)
v18.19.1
9.2.0
git version 2.43.0

===========================================


ubuntu@ip-172-31-33-208:~$ git clone https://github.com/Satyam25403/github_tutedude
Cloning into 'github_tutedude'...
remote: Enumerating objects: 61, done.
remote: Counting objects: 100% (61/61), done.
remote: Compressing objects: 100% (36/36), done.
remote: Total 61 (delta 17), reused 57 (delta 13), pack-reused 0 (from 0)
Receiving objects: 100% (61/61), 308.32 KiB | 10.28 MiB/s, done.
Resolving deltas: 100% (17/17), done.
ubuntu@ip-172-31-33-208:~$ cd github_tutedude


ubuntu@ip-172-31-33-208:~/github_tutedude$ npm i frontend/
added 92 packages in 3s
18 packages are looking for funding
  run `npm fund` for details


ubuntu@ip-172-31-33-208:~/github_tutedude$ pip3 install -r backend/requirements.txt --break-system-packages
Defaulting to user installation because normal site-packages is not writeable
Requirement already satisfied: flask in /usr/local/lib/python3.12/dist-packages (from -r backend/requirements.txt (line 1)) (3.1.2)
Requirement already satisfied: flask_cors in /usr/local/lib/python3.12/dist-packages (from -r backend/requirements.txt (line 2)) (6.0.1)
Collecting blinker>=1.9.0 (from flask->-r backend/requirements.txt (line 1))
  Downloading blinker-1.9.0-py3-none-any.whl.metadata (1.6 kB)
Requirement already satisfied: click>=8.1.3 in /usr/lib/python3/dist-packages (from flask->-r backend/requirements.txt (line 1)) (8.1.6)
Requirement already satisfied: itsdangerous>=2.2.0 in /usr/local/lib/python3.12/dist-packages (from flask->-r backend/requirements.txt (line 1)) (2.2.0)
Requirement already satisfied: jinja2>=3.1.2 in /usr/lib/python3/dist-packages (from flask->-r backend/requirements.txt (line 1)) (3.1.2)
Requirement already satisfied: markupsafe>=2.1.1 in /usr/lib/python3/dist-packages (from flask->-r backend/requirements.txt (line 1)) (2.1.5)
Requirement already satisfied: werkzeug>=3.1.0 in /usr/local/lib/python3.12/dist-packages (from flask->-r backend/requirements.txt (line 1)) (3.1.3)
Downloading blinker-1.9.0-py3-none-any.whl (8.5 kB)
Installing collected packages: blinker
Successfully installed blinker-1.9.0

==============

ubuntu@ip-172-31-33-208:~/github_tutedude$ nohup python3 backend/app.py > flask.log 2>&1 &
[1] 8273
ubuntu@ip-172-31-33-208:~/github_tutedude$ nohup node frontend/app.js > express.log 2>&1 &
[2] 8277

==============================

sudo apt install -y fontconfig openjdk-17-jre


ubuntu@ip-172-31-33-208:~/github_tutedude$ java -version
openjdk version "17.0.16" 2025-07-15
OpenJDK Runtime Environment (build 17.0.16+8-Ubuntu-0ubuntu124.04.1)
OpenJDK 64-Bit Server VM (build 17.0.16+8-Ubuntu-0ubuntu124.04.1, mixed mode, sharing)


sudo apt update
sudo apt install -y curl gnupg2 software-properties-common

curl -fsSL https://pkg.jenkins.io/debian/jenkins.io-2023.key | sudo tee \
  /usr/share/keyrings/jenkins-keyring.asc > /dev/null

echo deb [signed-by=/usr/share/keyrings/jenkins-keyring.asc] \
  https://pkg.jenkins.io/debian binary/ | sudo tee \
  /etc/apt/sources.list.d/jenkins.list > /dev/null

sudo apt update
sudo apt install -y jenkins

sudo systemctl start jenkins
sudo systemctl enable jenkins
sudo systemctl status jenkins



Sep 19 14:03:29 ip-172-31-33-208 jenkins[10359]: [LF]> This may also be found at: /var/lib/jenkins/secrets/initialAdminPassword
Sep 19 14:03:29 ip-172-31-33-208 jenkins[10359]: [LF]>
Sep 19 14:03:29 ip-172-31-33-208 jenkins[10359]: [LF]> *************************************************************
Sep 19 14:03:29 ip-172-31-33-208 jenkins[10359]: [LF]> *************************************************************
Sep 19 14:03:29 ip-172-31-33-208 jenkins[10359]: [LF]> *************************************************************
Sep 19 14:03:34 ip-172-31-33-208 jenkins[10359]: 2025-09-19 14:03:34.591+0000 [id=30]        INFO        jenkins.InitReactorRunner$1#onAt>
Sep 19 14:03:34 ip-172-31-33-208 jenkins[10359]: 2025-09-19 14:03:34.627+0000 [id=23]        INFO        hudson.lifecycle.Lifecycle#onRea>
Sep 19 14:03:34 ip-172-31-33-208 systemd[1]: Started jenkins.service - Jenkins Continuous Integration Server.
Sep 19 14:03:35 ip-172-31-33-208 jenkins[10359]: 2025-09-19 14:03:35.403+0000 [id=49]        INFO        h.m.DownloadService$Downloadable>
Sep 19 14:03:35 ip-172-31-33-208 jenkins[10359]: 2025-09-19 14:03:35.404+0000 [id=49]        INFO        hudson.util.Retrier#start: Perfo>


ubuntu@ip-172-31-33-208:~/github_tutedude$  sudo cat /var/lib/jenkins/secrets/initialAdminPassword
8f092ba7ad8d47578df97dcaa8fd3310

sudo chown -R ubuntu:ubuntu /var/lib/jenkins/deploy_logs

======================================================

#!/bin/bash
set -e
lsof -t -i:3000 | xargs -r kill -9 || true
lsof -t -i:5000 | xargs -r kill -9 || true

WORKDIR="/var/lib/jenkins/workspace/satyam/github_tutedude"
rm -rf "$WORKDIR" || true
git clone https://github.com/Satyam25403/github_tutedude "$WORKDIR"
cd "$WORKDIR"
cd frontend
npm install
cd ../backend
pip3 install -r requirements.txt --break-system-packages
cd ../
nohup python3 backend/app.py > /dev/null 2>&1 &
nohup node frontend/app.js > /dev/null 2>&1 &

=====================================================================================

PS D:\TUTEDUDE assignments\github_tutedude> git status
On branch main
Your branch is up to date with 'origin/main'.

Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
        modified:   backend/app.py
        modified:   backend/data.json
        modified:   frontend/public/style.css

no changes added to commit (use "git add" and/or "git commit -a")
PS D:\TUTEDUDE assignments\github_tutedude> git add .
PS D:\TUTEDUDE assignments\github_tutedude> git commit "some changes made to test ci/cd"
error: pathspec 'some changes made to test ci/cd' did not match any file(s) known to git
PS D:\TUTEDUDE assignments\github_tutedude> git commit -m "some changes made to test ci/cd" 
[main 7a8680b] some changes made to test ci/cd
 3 files changed, 3 insertions(+), 2 deletions(-)
PS D:\TUTEDUDE assignments\github_tutedude> git push
Enumerating objects: 15, done.
Counting objects: 100% (15/15), done.
Delta compression using up to 8 threads
Compressing objects: 100% (7/7), done.
Writing objects: 100% (8/8), 683 bytes | 227.00 KiB/s, done.
Total 8 (delta 4), reused 0 (delta 0), pack-reused 0
remote: Resolving deltas: 100% (4/4), completed with 4 local objects.
To https://github.com/Satyam25403/github_tutedude
   75c485d..7a8680b  main -> main


================================================

Proof of changes getting reflected to server:
ubuntu@ip-172-31-33-208:/var/lib/jenkins/workspace/satyam$ cat github_tutedude/backend/data.json
[
    {"id": 0, "name":"Tutedude"},
    {"id": 1, "name": "sagar"},
    {"id": 2, "name": "satyam"},
    {"id": 3, "name": "yaswanth"},
    {"id": 4, "name": "noob"},
    {"id": 5, "name": "lucky"}
]ubuntu@ip-172-31-33-208:/var/lib/jenkins/workspace/satyam$ ^C